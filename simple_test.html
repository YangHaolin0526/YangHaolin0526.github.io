<!DOCTYPE html>
<html>
<head>
    <title>Simple Filter Test</title>
    <style>
        .publication-filters {
            display: flex;
            gap: 5px;
            margin: 20px 0;
        }
        .filter-btn {
            background: #f8f9fa;
            border: 1px solid #ddd;
            padding: 10px 15px;
            cursor: pointer;
            font-size: 14px;
        }
        .filter-btn.active {
            background: #007bff;
            color: white;
        }
        .publication-item {
            background: #f0f0f0;
            padding: 15px;
            margin: 10px 0;
            border: 1px solid #ccc;
        }
        .debug {
            background: #fffacd;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ddd;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <h1>ç®€å•è¿‡æ»¤å™¨æµ‹è¯•</h1>
    
    <div id="debug" class="debug">ç‚¹å‡»æŒ‰é’®æŸ¥çœ‹è°ƒè¯•ä¿¡æ¯...</div>
    
    <div class="publication-filters">
        <button class="filter-btn active" data-filter="selected" onclick="handleFilterClick('selected', this)">SELECTED PAPERS</button>
        <button class="filter-btn" data-filter="all" onclick="handleFilterClick('all', this)">ALL</button>
        <button class="filter-btn" data-filter="machine-learning" onclick="handleFilterClick('machine-learning', this)">MACHINE LEARNING</button>
        <button class="filter-btn" data-filter="natural-language" onclick="handleFilterClick('natural-language', this)">NATURAL LANGUAGE PROCESSING</button>
    </div>
    
    <div class="publications-list">
        <div class="publication-item" data-category="selected machine-learning">
            <strong>è®ºæ–‡1 (Selected + ML)</strong><br>
            è¿™æ˜¯ä¸€ç¯‡ç²¾é€‰çš„æœºå™¨å­¦ä¹ è®ºæ–‡
        </div>
        
        <div class="publication-item" data-category="selected natural-language">
            <strong>è®ºæ–‡2 (Selected + NLP)</strong><br>
            è¿™æ˜¯ä¸€ç¯‡ç²¾é€‰çš„è‡ªç„¶è¯­è¨€å¤„ç†è®ºæ–‡
        </div>
        
        <div class="publication-item" data-category="machine-learning">
            <strong>è®ºæ–‡3 (ML only)</strong><br>
            è¿™æ˜¯ä¸€ç¯‡æœºå™¨å­¦ä¹ è®ºæ–‡
        </div>
        
        <div class="publication-item" data-category="natural-language">
            <strong>è®ºæ–‡4 (NLP only)</strong><br>
            è¿™æ˜¯ä¸€ç¯‡è‡ªç„¶è¯­è¨€å¤„ç†è®ºæ–‡
        </div>
        
        <div class="publication-item" data-category="machine-learning natural-language">
            <strong>è®ºæ–‡5 (Both ML and NLP)</strong><br>
            è¿™ç¯‡è®ºæ–‡æ¶µç›–ä¸¤ä¸ªé¢†åŸŸ
        </div>
    </div>

<script>
// ç®€å•ç›´æ¥çš„è¿‡æ»¤å¤„ç†å‡½æ•°
function handleFilterClick(filter, clickedButton) {
    var debugDiv = document.getElementById('debug');
    debugDiv.innerHTML += '<br>ğŸ”„ Button clicked: ' + filter + ' at ' + new Date().toLocaleTimeString();
    
    try {
        // 1. ç§»é™¤æ‰€æœ‰æŒ‰é’®çš„activeç±»
        var allButtons = document.getElementsByClassName('filter-btn');
        for (var i = 0; i < allButtons.length; i++) {
            allButtons[i].classList.remove('active');
        }
        
        // 2. ç»™ç‚¹å‡»çš„æŒ‰é’®æ·»åŠ activeç±»
        clickedButton.classList.add('active');
        debugDiv.innerHTML += '<br>âœ… Button activated: ' + filter;
        
        // 3. è·å–æ‰€æœ‰è®ºæ–‡æ¡ç›®
        var allItems = document.getElementsByClassName('publication-item');
        debugDiv.innerHTML += '<br>ğŸ“„ Found ' + allItems.length + ' publication items';
        
        var visibleCount = 0;
        
        // 4. è¿‡æ»¤æ˜¾ç¤ºè®ºæ–‡
        for (var j = 0; j < allItems.length; j++) {
            var item = allItems[j];
            var categories = item.getAttribute('data-category') || '';
            
            if (filter === 'all') {
                // æ˜¾ç¤ºæ‰€æœ‰è®ºæ–‡
                item.style.display = 'block';
                visibleCount++;
            } else {
                // æ£€æŸ¥æ˜¯å¦åŒ…å«æŒ‡å®šç±»åˆ«
                if (categories.indexOf(filter) >= 0) {
                    item.style.display = 'block';
                    visibleCount++;
                } else {
                    item.style.display = 'none';
                }
            }
        }
        
        debugDiv.innerHTML += '<br>ğŸ‘ï¸ Showing ' + visibleCount + ' items for filter: ' + filter;
        debugDiv.scrollTop = debugDiv.scrollHeight;
        
    } catch (error) {
        debugDiv.innerHTML += '<br>âŒ Error: ' + error.message;
    }
}

// é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
function initializeFilters() {
    var debugDiv = document.getElementById('debug');
    debugDiv.innerHTML = 'ğŸš€ Initializing publication filters...';
    
    // é»˜è®¤æ¿€æ´»selectedè¿‡æ»¤å™¨
    var selectedBtn = document.querySelector('.filter-btn[data-filter="selected"]');
    if (selectedBtn) {
        handleFilterClick('selected', selectedBtn);
    }
}

// åˆå§‹åŒ–
setTimeout(initializeFilters, 100);
</script>

</body>
</html> 